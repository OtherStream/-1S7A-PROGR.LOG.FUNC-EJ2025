% gui.pl
:- use_module(library(pce)).
:- consult('reglas.pl').  % A su vez, este ya consulta conocimiento.pl

inicio :-
    new(Ventana, dialog('Consulta de Plantas Medicinales')),
    send(Ventana, size, size(400, 300)),

    % Menú desplegable para elegir planta
    send(Ventana, append, new(MenuPlanta, menu(planta, cycle))),
    forall(planta(Planta), send(MenuPlanta, append, Planta)),

    % Botón para mostrar información
    send(Ventana, append, button('Mostrar información',
        message(@prolog, mostrar_info, MenuPlanta?selection, Ventana))),

    % Área de salida
    send(Ventana, append, new(Salida, text_item(info, ''))),
    send(Salida, name, salida),

    send(Ventana, open).

% Mostrar toda la información relacionada a la planta
mostrar_info(Planta, Ventana) :-
    findall(Linea, info_planta(Planta, Linea), Lineas),
    atomic_list_concat(Lineas, '\n', Texto),
    get(Ventana, member, salida, CampoTexto),
    send(CampoTexto, selection, Texto).
